block/RTC:
  description: RTC register block.
  items:
  - name: TR
    description: RTC time register.
    byte_offset: 0
    fieldset: TR
  - name: DR
    description: RTC date register.
    byte_offset: 4
    fieldset: DR
  - name: SSR
    description: RTC sub second register.
    byte_offset: 8
    fieldset: SSR
  - name: ICSR
    description: RTC initialization control and status register.
    byte_offset: 12
    fieldset: ICSR
  - name: PRER
    description: RTC prescaler register.
    byte_offset: 16
    fieldset: PRER
  - name: CR
    description: RTC control register.
    byte_offset: 24
    fieldset: CR
  - name: WPR
    description: RTC write protection register.
    byte_offset: 36
    fieldset: WPR
  - name: CALR
    description: RTC calibration register.
    byte_offset: 40
    fieldset: CALR
  - name: SHIFTR
    description: RTC shift control register.
    byte_offset: 44
    fieldset: SHIFTR
  - name: TSTR
    description: RTC timestamp time register.
    byte_offset: 48
    fieldset: TSTR
  - name: TSDR
    description: RTC timestamp date register.
    byte_offset: 52
    fieldset: TSDR
  - name: TSSSR
    description: RTC timestamp sub second register.
    byte_offset: 56
    fieldset: TSSSR
  - name: ALRMAR
    description: RTC alarm A register.
    byte_offset: 64
    fieldset: ALRMAR
  - name: ALRMASSR
    description: RTC alarm A sub second register.
    byte_offset: 68
    fieldset: ALRMASSR
  - name: SR
    description: RTC status register.
    byte_offset: 80
    fieldset: SR
  - name: MISR
    description: RTC masked interrupt status register.
    byte_offset: 84
    fieldset: MISR
  - name: SCR
    description: RTC status clear register.
    byte_offset: 92
    fieldset: SCR
fieldset/ALRMAR:
  description: RTC alarm A register.
  fields:
  - name: SU
    description: Second units in BCD format.
    bit_offset: 0
    bit_size: 4
  - name: ST
    description: Second tens in BCD format.
    bit_offset: 4
    bit_size: 3
  - name: MSK1
    description: Alarm A seconds mask.
    bit_offset: 7
    bit_size: 1
  - name: MNU
    description: Minute units in BCD format.
    bit_offset: 8
    bit_size: 4
  - name: MNT
    description: Minute tens in BCD format.
    bit_offset: 12
    bit_size: 3
  - name: MSK2
    description: Alarm A minutes mask.
    bit_offset: 15
    bit_size: 1
  - name: HU
    description: Hour units in BCD format.
    bit_offset: 16
    bit_size: 4
  - name: HT
    description: Hour tens in BCD format.
    bit_offset: 20
    bit_size: 2
  - name: PM
    description: AM/PM notation.
    bit_offset: 22
    bit_size: 1
  - name: MSK3
    description: Alarm A hours mask.
    bit_offset: 23
    bit_size: 1
  - name: DU
    description: Date units or day in BCD format.
    bit_offset: 24
    bit_size: 4
  - name: DT
    description: Date tens in BCD format.
    bit_offset: 28
    bit_size: 2
  - name: WDSEL
    description: Week day selection.
    bit_offset: 30
    bit_size: 1
  - name: MSK4
    description: Alarm A date mask.
    bit_offset: 31
    bit_size: 1
fieldset/ALRMASSR:
  description: RTC alarm A sub second register.
  fields:
  - name: SS
    description: Sub seconds value This value is compared with the contents of the synchronous prescaler counter to determine if alarm A is to be activated. Only bits 0 up MASKSS-1 are compared.
    bit_offset: 0
    bit_size: 15
  - name: MASKSS
    description: 'Mask the most-significant bits starting at this bit 2: SS[14:2] are don’t care in alarm A comparison. Only SS[1:0] are compared. 3: SS[14:3] are don’t care in alarm A comparison. Only SS[2:0] are compared. ... 12: SS[14:12] are don’t care in alarm A comparison. SS[11:0] are compared. 13: SS[14:13] are don’t care in alarm A comparison. SS[12:0] are compared. 14: SS[14] is don’t care in alarm A comparison. SS[13:0] are compared. 15: All 15 SS bits are compared and must match to activate alarm. The overflow bits of the synchronous counter (bits 15) is never compared. This bit can be different from 0 only after a shift operation. Note: The overflow bits of the synchronous counter (bits 15) is never compared. This bit can be different from 0 only after a shift operation.'
    bit_offset: 24
    bit_size: 4
fieldset/CALR:
  description: RTC calibration register.
  fields:
  - name: CALM
    description: Calibration minus The frequency of the calendar is reduced by masking CALM out of 220 RTCCLK pulses (32 seconds if the input frequency is 32768 Hz). This decreases the frequency of the calendar with a resolution of 0.9537 ppm. To increase the frequency of the calendar, this feature should be used in conjunction with CALP. See.
    bit_offset: 0
    bit_size: 9
  - name: CALW16
    description: 'Use a 16-second calibration cycle period When CALW16 is set to 1, the 16-second calibration cycle period is selected. This bit must not be set to 1 if CALW8 = 1. Note: CALM[0] is stuck at 0 when CALW16 = 1. Refer to calibration.'
    bit_offset: 13
    bit_size: 1
  - name: CALW8
    description: 'Use an 8-second calibration cycle period When CALW8 is set to 1, the 8-second calibration cycle period is selected. Note: CALM[1:0] are stuck at 00 when CALW8 = 1. Refer to digital calibration.'
    bit_offset: 14
    bit_size: 1
  - name: CALP
    description: 'Increase frequency of RTC by 488.5 ppm This feature is intended to be used in conjunction with CALM, which lowers the frequency of the calendar with a fine resolution. if the input frequency is 32768 Hz, the number of RTCCLK pulses added during a 32-second window is calculated as follows: (512 � CALP) - CALM. Refer to.'
    bit_offset: 15
    bit_size: 1
fieldset/CR:
  description: RTC control register.
  fields:
  - name: TSEDGE
    description: Timestamp event active edge TSE must be reset when TSEDGE is changed to avoid unwanted TSF setting.
    bit_offset: 3
    bit_size: 1
  - name: REFCKON
    description: 'RTC_REFIN reference clock detection enable (50 or 60 Hz) Note: PREDIV_S must be 0x00FF.'
    bit_offset: 4
    bit_size: 1
  - name: BYPSHAD
    description: 'Bypass the shadow registers Note: If the frequency of the APB1 clock is less than seven times the frequency of RTCCLK, BYPSHAD must be set to 1.'
    bit_offset: 5
    bit_size: 1
  - name: FMT
    description: Hour format.
    bit_offset: 6
    bit_size: 1
  - name: ALRAE
    description: Alarm A enable.
    bit_offset: 8
    bit_size: 1
  - name: TSE
    description: timestamp enable.
    bit_offset: 11
    bit_size: 1
  - name: ALRAIE
    description: Alarm A interrupt enable.
    bit_offset: 12
    bit_size: 1
  - name: TSIE
    description: Timestamp interrupt enable.
    bit_offset: 15
    bit_size: 1
  - name: ADD1H
    description: Add 1 hour (summer time change) When this bit is set outside initialization mode, 1 hour is added to the calendar time. This bit is always read as 0.
    bit_offset: 16
    bit_size: 1
  - name: SUB1H
    description: Subtract 1 hour (winter time change) When this bit is set outside initialization mode, 1 hour is subtracted to the calendar time if the current hour is not 0. This bit is always read as 0. Setting this bit has no effect when current hour is 0.
    bit_offset: 17
    bit_size: 1
  - name: BKP
    description: Backup This bit can be written by the user to memorize whether the daylight saving time change has been performed or not.
    bit_offset: 18
    bit_size: 1
  - name: COSEL
    description: Calibration output selection When COE = 1, this bit selects which signal is output on CALIB. These frequencies are valid for RTCCLK at 32.768 kHz and prescalers at their default values (PREDIV_A = 127 and PREDIV_S = 255). Refer to.
    bit_offset: 19
    bit_size: 1
  - name: POL
    description: Output polarity This bit is used to configure the polarity of TAMPALRM output.
    bit_offset: 20
    bit_size: 1
  - name: OSEL
    description: Output selection These bits are used to select the flag to be routed to TAMPALRM output.
    bit_offset: 21
    bit_size: 2
  - name: COE
    description: Calibration output enable This bit enables the CALIB output.
    bit_offset: 23
    bit_size: 1
  - name: TAMPALRM_PU
    description: TAMPALRM pull-up enable.
    bit_offset: 29
    bit_size: 1
  - name: TAMPALRM_TYPE
    description: TAMPALRM output type.
    bit_offset: 30
    bit_size: 1
  - name: OUT2EN
    description: 'RTC_OUT2 output enable Setting this bit allows to remap the RTC outputs on RTC_OUT2 as follows: OUT2EN = 0: RTC output 2 disable If OSEL ≠ 00 or TAMPOE = 1: TAMPALRM is output on RTC_OUT1 If OSEL = 00 and TAMPOE = 0 and COE = 1: CALIB is output on RTC_OUT1 OUT2EN = 1: RTC output 2 enable If (OSEL ≠ 00 or TAMPOE = 1) and COE = 0: TAMPALRM is output on RTC_OUT2 If OSEL = 00 and TAMPOE = 0 and COE = 1: CALIB is output on RTC_OUT2 If (OSEL≠ 00 or TAMPOE = 1) and COE = 1: CALIB is output on RTC_OUT2 and TAMPALRM is output on RTC_OUT1.'
    bit_offset: 31
    bit_size: 1
fieldset/DR:
  description: RTC date register.
  fields:
  - name: DU
    description: Date units in BCD format.
    bit_offset: 0
    bit_size: 4
  - name: DT
    description: Date tens in BCD format.
    bit_offset: 4
    bit_size: 2
  - name: MU
    description: Month units in BCD format.
    bit_offset: 8
    bit_size: 4
  - name: MT
    description: Month tens in BCD format.
    bit_offset: 12
    bit_size: 1
  - name: WDU
    description: Week day units ...
    bit_offset: 13
    bit_size: 3
  - name: YU
    description: Year units in BCD format.
    bit_offset: 16
    bit_size: 4
  - name: YT
    description: Year tens in BCD format.
    bit_offset: 20
    bit_size: 4
fieldset/ICSR:
  description: RTC initialization control and status register.
  fields:
  - name: ALRAWF
    description: Alarm A write flag This bit is set by hardware when alarm A values can be changed, after the ALRAE bit has been set to 0 in RTC_CR. It is cleared by hardware in initialization mode.
    bit_offset: 0
    bit_size: 1
  - name: SHPF
    description: Shift operation pending This flag is set by hardware as soon as a shift operation is initiated by a write to the RTC_SHIFTR register. It is cleared by hardware when the corresponding shift operation has been executed. Writing to the SHPF bit has no effect.
    bit_offset: 3
    bit_size: 1
  - name: INITS
    description: Initialization status flag This bit is set by hardware when the calendar year field is different from 0 (Power-on reset state).
    bit_offset: 4
    bit_size: 1
  - name: RSF
    description: Registers synchronization flag This bit is set by hardware each time the calendar registers are copied into the shadow registers (RTC_SSR, RTC_TR and RTC_DR). This bit is cleared by hardware in initialization mode, while a shift operation is pending (SHPF = 1), or when in bypass shadow register mode (BYPSHAD = 1). This bit can also be cleared by software. It is cleared either by software or by hardware in initialization mode.
    bit_offset: 5
    bit_size: 1
  - name: INITF
    description: Initialization flag When this bit is set to 1, the RTC is in initialization state, and the time, date and prescaler registers can be updated.
    bit_offset: 6
    bit_size: 1
  - name: INIT
    description: Initialization mode.
    bit_offset: 7
    bit_size: 1
  - name: RECALPF
    description: Recalibration pending Flag The RECALPF status flag is automatically set to 1 when software writes to the RTC_CALR register, indicating that the RTC_CALR register is blocked. When the new calibration settings are taken into account, this bit returns to 0. Refer to.
    bit_offset: 16
    bit_size: 1
fieldset/MISR:
  description: RTC masked interrupt status register.
  fields:
  - name: ALRAMF
    description: Alarm A masked flag This flag is set by hardware when the alarm A interrupt occurs.
    bit_offset: 0
    bit_size: 1
  - name: TSMF
    description: Timestamp masked flag This flag is set by hardware when a timestamp interrupt occurs.
    bit_offset: 3
    bit_size: 1
  - name: TSOVMF
    description: Timestamp overflow masked flag This flag is set by hardware when a timestamp interrupt occurs while TSMF is already set. It is recommended to check and then clear TSOVF only after clearing the TSF bit. Otherwise, an overflow might not be noticed if a timestamp event occurs immediately before the TSF bit is cleared.
    bit_offset: 4
    bit_size: 1
fieldset/PRER:
  description: RTC prescaler register.
  fields:
  - name: PREDIV_S
    description: 'Synchronous prescaler factor This is the synchronous division factor: ck_spre frequency = ck_apre frequency/(PREDIV_S+1).'
    bit_offset: 0
    bit_size: 15
  - name: PREDIV_A
    description: 'Asynchronous prescaler factor This is the asynchronous division factor: ck_apre frequency = RTCCLK frequency/(PREDIV_A+1).'
    bit_offset: 16
    bit_size: 7
fieldset/SCR:
  description: RTC status clear register.
  fields:
  - name: CALRAF
    description: Clear alarm A flag Writing 1 in this bit clears the ALRAF bit in the RTC_SR register.
    bit_offset: 0
    bit_size: 1
  - name: CTSF
    description: Clear timestamp flag Writing 1 in this bit clears the TSOVF bit in the RTC_SR register.
    bit_offset: 3
    bit_size: 1
  - name: CTSOVF
    description: Clear timestamp overflow flag Writing 1 in this bit clears the TSOVF bit in the RTC_SR register. It is recommended to check and then clear TSOVF only after clearing the TSF bit. Otherwise, an overflow might not be noticed if a timestamp event occurs immediately before the TSF bit is cleared.
    bit_offset: 4
    bit_size: 1
fieldset/SHIFTR:
  description: RTC shift control register.
  fields:
  - name: SUBFS
    description: 'Subtract a fraction of a second These bits are write only and is always read as zero. Writing to this bit has no effect when a shift operation is pending (when SHPF = 1, in RTC_ICSR). The value which is written to SUBFS is added to the synchronous prescaler counter. Since this counter counts down, this operation effectively subtracts from (delays) the clock by: Delay (seconds) = SUBFS / (PREDIV_S + 1) A fraction of a second can effectively be added to the clock (advancing the clock) when the ADD1S function is used in conjunction with SUBFS, effectively advancing the clock by: Advance (seconds) = (1 - (SUBFS / (PREDIV_S + 1))). Note: Writing to SUBFS causes RSF to be cleared. Software can then wait until RSF = 1 to be sure that the shadow registers have been updated with the shifted time.'
    bit_offset: 0
    bit_size: 15
  - name: ADD1S
    description: Add one second This bit is write only and is always read as zero. Writing to this bit has no effect when a shift operation is pending (when SHPF = 1, in RTC_ICSR). This function is intended to be used with SUBFS (see description below) in order to effectively add a fraction of a second to the clock in an atomic operation.
    bit_offset: 31
    bit_size: 1
fieldset/SR:
  description: RTC status register.
  fields:
  - name: ALRAF
    description: Alarm A flag This flag is set by hardware when the time/date registers (RTC_TR and RTC_DR) match the alarm A register (RTC_ALRMAR).
    bit_offset: 0
    bit_size: 1
  - name: TSF
    description: Timestamp flag This flag is set by hardware when a timestamp event occurs.
    bit_offset: 3
    bit_size: 1
  - name: TSOVF
    description: Timestamp overflow flag This flag is set by hardware when a timestamp event occurs while TSF is already set. It is recommended to check and then clear TSOVF only after clearing the TSF bit. Otherwise, an overflow might not be noticed if a timestamp event occurs immediately before the TSF bit is cleared.
    bit_offset: 4
    bit_size: 1
fieldset/SSR:
  description: RTC sub second register.
  fields:
  - name: SS
    description: 'Sub second value SS[15:0] is the value in the synchronous prescaler counter. The fraction of a second is given by the formula below: Second fraction = (PREDIV_S - SS) / (PREDIV_S + 1) Note: SS can be larger than PREDIV_S only after a shift operation. In that case, the correct time/date is one second less than as indicated by RTC_TR/RTC_DR.'
    bit_offset: 0
    bit_size: 16
fieldset/TR:
  description: RTC time register.
  fields:
  - name: SU
    description: Second units in BCD format.
    bit_offset: 0
    bit_size: 4
  - name: ST
    description: Second tens in BCD format.
    bit_offset: 4
    bit_size: 3
  - name: MNU
    description: Minute units in BCD format.
    bit_offset: 8
    bit_size: 4
  - name: MNT
    description: Minute tens in BCD format.
    bit_offset: 12
    bit_size: 3
  - name: HU
    description: Hour units in BCD format.
    bit_offset: 16
    bit_size: 4
  - name: HT
    description: Hour tens in BCD format.
    bit_offset: 20
    bit_size: 2
  - name: PM
    description: AM/PM notation.
    bit_offset: 22
    bit_size: 1
fieldset/TSDR:
  description: RTC timestamp date register.
  fields:
  - name: DU
    description: Date units in BCD format.
    bit_offset: 0
    bit_size: 4
  - name: DT
    description: Date tens in BCD format.
    bit_offset: 4
    bit_size: 2
  - name: MU
    description: Month units in BCD format.
    bit_offset: 8
    bit_size: 4
  - name: MT
    description: Month tens in BCD format.
    bit_offset: 12
    bit_size: 1
  - name: WDU
    description: Week day units.
    bit_offset: 13
    bit_size: 3
fieldset/TSSSR:
  description: RTC timestamp sub second register.
  fields:
  - name: SS
    description: Sub second value SS[15:0] is the value of the synchronous prescaler counter when the timestamp event occurred.
    bit_offset: 0
    bit_size: 16
fieldset/TSTR:
  description: RTC timestamp time register.
  fields:
  - name: SU
    description: Second units in BCD format.
    bit_offset: 0
    bit_size: 4
  - name: ST
    description: Second tens in BCD format.
    bit_offset: 4
    bit_size: 3
  - name: MNU
    description: Minute units in BCD format.
    bit_offset: 8
    bit_size: 4
  - name: MNT
    description: Minute tens in BCD format.
    bit_offset: 12
    bit_size: 3
  - name: HU
    description: Hour units in BCD format.
    bit_offset: 16
    bit_size: 4
  - name: HT
    description: Hour tens in BCD format.
    bit_offset: 20
    bit_size: 2
  - name: PM
    description: AM/PM notation.
    bit_offset: 22
    bit_size: 1
fieldset/WPR:
  description: RTC write protection register.
  fields:
  - name: KEY
    description: Write protection key This byte is written by software. Reading this byte always returns 0x00. Refer to for a description of how to unlock RTC register write protection.
    bit_offset: 0
    bit_size: 8
